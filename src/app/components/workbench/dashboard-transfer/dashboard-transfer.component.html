<app-page-header title="Dashboard Transfer" title1="Home" activeitem="Dashboard Transfer"></app-page-header>
 <section class="py-5 bg-light dashboard-transfer">
  <div class="container">
    <div class="row g-4">
      <div class="col-lg-6 d-flex">
        <div class="card flex-fill shadow-sm">
          <div class="card-body">
            <div class="d-flex align-items-center mb-4">
              <i class="fas fa-download fa-2x text-primary me-3"></i>
              <h5 class="card-title mb-0">Export Dashboard</h5>
            </div>
            <form (ngSubmit)="doExport()">
              <div class="mb-3">
                <label class="form-label">Dashboard ID</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-id-badge"></i></span>
                  <select id="dashboardId" name="exportDashboardId" class="form-select form-select select2 fs-14"
                        [(ngModel)]="exportDashboardId" required>
                        <option value="0" disabled selected>Select a Dashboard</option>
                        <option *ngFor="let dashboard of dashboardList" [value]=dashboard.dashboard_id>
                            {{dashboard.dashboard_name}}
                        </option>
                    </select>
                </div>
              </div>
              <button
                type="submit"
                class="btn btn-primary w-100 fw-semibold"
                [disabled]="loadingExport"
              >
                <span
                  *ngIf="loadingExport"
                  class="spinner-border spinner-border-sm me-2"
                ></span>
                Export
              </button>
              <div *ngIf="exportResultKey" class="alert alert-info mt-3 d-flex align-items-center">
                <strong class="me-2">Your Export Key:</strong>
                <code class="me-auto">{{exportResultKey}}</code>
                <button class="btn btn-outline-secondary btn-sm" (click)="copyKey()">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="col-lg-6 d-flex">
        <div class="card flex-fill shadow-sm">
          <div class="card-body">
            <div class="d-flex align-items-center mb-4">
              <i class="fas fa-upload fa-2x text-success me-3"></i>
              <h5 class="card-title mb-0">Import Dashboard</h5>
            </div>
            <form (ngSubmit)="doImport()">
              <div class="mb-3">
                <label class="form-label">Import Key</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-key"></i></span>
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="importKey"
                    name="importKey"
                    placeholder="Enter Import Key"
                    required
                  />
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Hierarchy ID</label>
                <div class="input-group">
                  <span class="input-group-text"
                    ><i class="fas fa-layer-group"></i
                  ></span>
                  
                  <select id="hierarchyId" name="hierarchyId" class="form-select form-select select2 fs-14"
                        [(ngModel)]="hierarchyId" required>
                        <option value="0" disabled selected>Select a DataSource</option>
                        <option *ngFor="let connection of connectionsList" [value]=connection.hierarchy_id>
                            {{connection.display_name}}
                        </option>
                    </select>
                </div>
              </div>
              <button
                type="submit"
                class="btn btn-success w-100 fw-semibold"
              >
                Import
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<ng-template #sheetcontainer></ng-template>